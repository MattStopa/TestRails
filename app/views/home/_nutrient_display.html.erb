<div data-controller="nutrient-display">
    <div class="bg-white px-3 py-3 m-5 mt-3 mb-3 ml-4 shadow-lg rounded flex <%= defined?(highlighted) ? 'highlighted-fact': '' %>">
        <div class="flex w-full" id="fact-<%= index + 1 %>">
        <div class="rounded bg-green-500 border absolute -ml-8  px-2 py-2 rounded text-white">
            #<%= index + 1 %>
        </div>
        <div class="w-full">
            <div class="flex justify-between">
            <div class="ml-2 text-xl mt-1 text-3xl food-title"><%= fact.headline %></div>
            <%= image_tag 'copy', "data-action": "click->nutrient-display#copy", "data-url": "https://www.nutrientstats.com/nutrient/#{@food.slug}/?fact=#{fact.id}", class:"h-8 cursor-pointer", title: "Copy Direct Link To Clipboard" %>
            </div>
            <div class="ml-2 mt-4 text-blue-500 p-200 p-2 border"><%= fact.summary %></div>
            <div class="ml-3 mt-2">
            <% if(fact.links.split("\n").any? { |i| @found = i;  i.include?('youtube')  })%>

                <iframe width="100%" height="315" src="https://www.youtube.com/embed/<%= @found.split("v=").second.split("&").first %>" title="YouTube video player" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
            <% end %>
            </div>
            <div class="ml-0 p-2">
            <div class="break-all" style="margin-top:14px">
                <% fact.links.split("\n").each do |link|  %>
                <div><b>[Source]</b> <a target="_blank" class="hover:underline" href="<%= link %>"><%= link %></a></div>
                <% end %>
            </div>
            </div>
            <div class="ml-2 inline-block">
            <% fact.tags.each do |tag| %>
                <%= render 'components/tag', {tag: tag} %>
            <% end %>
            </div>
        </div>
        </div>
        <div></div>
        <div class="flex headline-holder"></div>
    </div>
</div>